<div class="filters">
    <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <span>Filteri</span>
                    <mat-icon>filter_list</mat-icon>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <form (ngSubmit)="applyFilters()" [formGroup]="filtersForm">
                <div formGroupName="category">
                    <h4>Odaberi kategoriju:</h4>
                    <div class="checkbox-filters">
                        <mat-checkbox *ngFor="let category of allCategories" formControlName="{{ category }}">{{ category }}</mat-checkbox>
                    </div>
                </div>
                <div formGroupName="brand">
                    <h4>Odaberi brend:</h4>
                    <div  class="checkbox-filters">
                        <mat-checkbox *ngFor="let brand of allBrands" formControlName="{{ brand }}">{{ brand }}</mat-checkbox>
                    </div>
                </div>
                <div formGroupName="shop">
                    <h4>Odaberi prodavnicu:</h4>
                    <div class="checkbox-filters">
                        <mat-checkbox *ngFor="let shop of allShops" formControlName="{{ shop }}">{{ shop }}</mat-checkbox>
                    </div>
                </div>
                <div class="range-filters">
                    <div formGroupName="discount">
                        <h4>Opseg popusta:</h4>
                        <mat-form-field>
                            <mat-label>Minimalni popust</mat-label>
                            <input matInput type="number" formControlName="minDiscount">
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Maksimalni popust</mat-label>
                            <input matInput type="number" formControlName="maxDiscount">
                        </mat-form-field>
                    </div>
                    <div formGroupName="price">
                        <h4>Opseg cene:</h4>
                        <mat-form-field>
                            <mat-label>Minimalna cena</mat-label>
                            <input matInput type="number" formControlName="minPrice">
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Maksimalna cena</mat-label>
                            <input matInput type="number" formControlName="maxPrice">
                        </mat-form-field>
                    </div>
                    <div formGroupName="save">
                        <h4>Opseg uštede:</h4>
                        <mat-form-field>
                            <mat-label>Minimalna ušteda</mat-label>
                            <input matInput type="number" formControlName="minSave">
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Maksimalna ušteda</mat-label>
                            <input matInput type="number" formControlName="maxSave">
                        </mat-form-field>
                    </div>
                </div>
                <button mat-raised-button type="submit" color="accent">Filtriraj pretragu</button>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
</div>

<div class="products" *ngIf="filteredProducts.length > 0; else noProductsMessage" id="products-or-empty">
    <app-product *ngFor="let product of filteredProducts"
                 [product]="product"></app-product>
</div>

<ng-template #noProductsMessage>
    <div class="empty-state" id="products-or-empty">
        <mat-icon>block</mat-icon>
        <h2>Nema proizvoda za odabrane filtere</h2>
    </div>
</ng-template>


